<ion-header>
  <ion-toolbar>
    <ion-title>Tracking</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="logout()">Logout</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content forceOverscroll="true" fullscreen="true">
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <ion-card>
          <ion-card-header>
            <ion-card-subtitle>
              Tracking
            </ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>
            <ion-button *ngIf="!IS_ENABLED" (click)="enable()" expand="full"
              >enbale GPS</ion-button
            >
            <ion-button
              *ngIf="IS_ENABLED && !IS_TRACKING"
              (click)="start()"
              expand="full"
              >start tracking</ion-button
            >
            <ion-button
              *ngIf="IS_ENABLED && IS_TRACKING"
              (click)="stop()"
              expand="full"
              >stop tracking</ion-button
            >
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col size="12">
        <ion-card *ngIf="TRAJECT">
          <ion-card-content>
            Recording Traject n: {{TRAJECT.id}}
          </ion-card-content>
        </ion-card>
        <ion-card>
          <ion-card-header>
            <ion-card-subtitle>
              Your Trajects
            </ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>
            <ion-list>
              <ion-item *ngFor="let traject of TRAJECTS.reverse();  ">
                <ion-label>Traject : {{traject.id}}</ion-label>
                <ion-buttons slot="end">
                  <ion-button (click)="send(traject)" *ngIf="!traject.uploaded"
                    ><ion-icon
                      slot="end"
                      color="success"
                      name="cloud-upload-outline"
                    ></ion-icon
                  ></ion-button>
                  <ion-button (click)="delete(traject)"
                    ><ion-icon
                      slot="end"
                      color="danger"
                      name="trash-outline"
                    ></ion-icon
                  ></ion-button>
                </ion-buttons>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
